{"ast":null,"code":"import{motion,AnimatePresence}from'framer-motion';import axios from'axios';import{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileSidebar(_ref){let{profile,setProfile,token,showProfilePrompt,setShowProfilePrompt,setMessage,setIsMinimized}=_ref;const[isExpanded,setIsExpanded]=useState(false);const[imageSrc,setImageSrc]=useState(profile.profilePic||'https://placehold.co/64x64?text=No+Image');useEffect(()=>{console.log('Profile prop changed, setting imageSrc to:',profile.profilePic);setImageSrc(profile.profilePic||'https://placehold.co/64x64?text=No+Image');},[profile.profilePic]);useEffect(()=>{setIsMinimized(!isExpanded);},[isExpanded,setIsMinimized]);const handleProfileSubmit=async e=>{e.preventDefault();try{const updatedProfile={...profile};await axios.put('http://localhost:5000/profile',updatedProfile,{headers:{Authorization:token}});setProfile(updatedProfile);setMessage('Profile updated!');setShowProfilePrompt(false);setIsExpanded(false);}catch(error){setMessage('Failed to update profile');}};const sidebarVariants={collapsed:{width:'64px',height:'64px',borderRadius:'50%',padding:0,transition:{type:'spring',stiffness:300,damping:25}},expanded:{width:'100%',height:'auto',borderRadius:'16px',padding:'1.5rem',transition:{type:'spring',stiffness:300,damping:25}}};const contentVariants={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:0.3,ease:'easeInOut'}}};const placeholderImage='https://placehold.co/64x64?text=No+Image';return/*#__PURE__*/_jsxs(motion.div,{initial:\"collapsed\",animate:isExpanded?'expanded':'collapsed',variants:sidebarVariants,className:\"bg-white shadow-lg flex flex-col items-center overflow-hidden\",style:{maxWidth:'300px'},children:[/*#__PURE__*/_jsx(motion.div,{whileHover:{scale:1.05,boxShadow:'0px 4px 15px rgba(0, 0, 0, 0.2)'},whileTap:{scale:0.95},onClick:()=>setIsExpanded(!isExpanded),className:\"cursor-pointer w-16 h-16 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:imageSrc,alt:\"Profile\",className:\"w-full h-full object-cover rounded-full\",onError:e=>{console.log('Image failed to load:',profile.profilePic);setImageSrc(placeholderImage);console.log('Switched to placeholder:',placeholderImage);},onLoad:()=>console.log('Image loaded successfully:',imageSrc)})}),/*#__PURE__*/_jsx(AnimatePresence,{children:isExpanded&&/*#__PURE__*/_jsxs(motion.div,{initial:\"hidden\",animate:\"visible\",exit:\"hidden\",variants:contentVariants,className:\"w-full mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-blue-700 mb-4 text-center\",children:\"Your Profile\"}),showProfilePrompt?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleProfileSubmit,className:\"flex flex-col gap-4 w-full\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Weight (kg)\",value:profile.weight,onChange:e=>setProfile({...profile,weight:e.target.value}),className:\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Target Calories\",value:profile.targetCalories,onChange:e=>setProfile({...profile,targetCalories:e.target.value}),className:\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Profile Picture URL (e.g., https://example.com/image.jpg)\",value:profile.profilePic,onChange:e=>setProfile({...profile,profilePic:e.target.value}),className:\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.05,boxShadow:'0px 4px 15px rgba(0, 0, 0, 0.2)'},whileTap:{scale:0.95},type:\"submit\",className:\"bg-blue-600 text-white p-3 rounded-lg shadow-lg\",children:\"Save Profile\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-700 text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Weight:\"}),\" \",profile.weight,\" kg\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Target Calories:\"}),\" \",profile.targetCalories]})]})]})})]});}export default ProfileSidebar;","map":{"version":3,"names":["motion","AnimatePresence","axios","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ProfileSidebar","_ref","profile","setProfile","token","showProfilePrompt","setShowProfilePrompt","setMessage","setIsMinimized","isExpanded","setIsExpanded","imageSrc","setImageSrc","profilePic","console","log","handleProfileSubmit","e","preventDefault","updatedProfile","put","headers","Authorization","error","sidebarVariants","collapsed","width","height","borderRadius","padding","transition","type","stiffness","damping","expanded","contentVariants","hidden","opacity","y","visible","duration","ease","placeholderImage","div","initial","animate","variants","className","style","maxWidth","children","whileHover","scale","boxShadow","whileTap","onClick","src","alt","onError","onLoad","exit","onSubmit","placeholder","value","weight","onChange","target","targetCalories","button"],"sources":["C:/Users/rupes/Portifolio/Fitness Tracker/client/src/components/ProfileSidebar.js"],"sourcesContent":["import { motion, AnimatePresence } from 'framer-motion';\r\nimport axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction ProfileSidebar({ profile, setProfile, token, showProfilePrompt, setShowProfilePrompt, setMessage, setIsMinimized }) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [imageSrc, setImageSrc] = useState(profile.profilePic || 'https://placehold.co/64x64?text=No+Image');\r\n\r\n  useEffect(() => {\r\n    console.log('Profile prop changed, setting imageSrc to:', profile.profilePic);\r\n    setImageSrc(profile.profilePic || 'https://placehold.co/64x64?text=No+Image');\r\n  }, [profile.profilePic]);\r\n\r\n  useEffect(() => {\r\n    setIsMinimized(!isExpanded);\r\n  }, [isExpanded, setIsMinimized]);\r\n\r\n  const handleProfileSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const updatedProfile = { ...profile };\r\n      await axios.put('http://localhost:5000/profile', updatedProfile, {\r\n        headers: { Authorization: token }\r\n      });\r\n      setProfile(updatedProfile);\r\n      setMessage('Profile updated!');\r\n      setShowProfilePrompt(false);\r\n      setIsExpanded(false);\r\n    } catch (error) {\r\n      setMessage('Failed to update profile');\r\n    }\r\n  };\r\n\r\n  const sidebarVariants = {\r\n    collapsed: { \r\n      width: '64px', \r\n      height: '64px', \r\n      borderRadius: '50%', \r\n      padding: 0, \r\n      transition: { type: 'spring', stiffness: 300, damping: 25 } \r\n    },\r\n    expanded: { \r\n      width: '100%', \r\n      height: 'auto', \r\n      borderRadius: '16px', \r\n      padding: '1.5rem', \r\n      transition: { type: 'spring', stiffness: 300, damping: 25 } \r\n    }\r\n  };\r\n\r\n  const contentVariants = {\r\n    hidden: { opacity: 0, y: -20 },\r\n    visible: { opacity: 1, y: 0, transition: { duration: 0.3, ease: 'easeInOut' } }\r\n  };\r\n\r\n  const placeholderImage = 'https://placehold.co/64x64?text=No+Image';\r\n\r\n  return (\r\n    <motion.div\r\n      initial=\"collapsed\"\r\n      animate={isExpanded ? 'expanded' : 'collapsed'}\r\n      variants={sidebarVariants}\r\n      className=\"bg-white shadow-lg flex flex-col items-center overflow-hidden\"\r\n      style={{ maxWidth: '300px' }}\r\n    >\r\n      <motion.div\r\n        whileHover={{ scale: 1.05, boxShadow: '0px 4px 15px rgba(0, 0, 0, 0.2)' }}\r\n        whileTap={{ scale: 0.95 }}\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className=\"cursor-pointer w-16 h-16 rounded-full overflow-hidden\"\r\n      >\r\n        <img\r\n          src={imageSrc}\r\n          alt=\"Profile\"\r\n          className=\"w-full h-full object-cover rounded-full\"\r\n          onError={(e) => {\r\n            console.log('Image failed to load:', profile.profilePic);\r\n            setImageSrc(placeholderImage);\r\n            console.log('Switched to placeholder:', placeholderImage);\r\n          }}\r\n          onLoad={() => console.log('Image loaded successfully:', imageSrc)}\r\n        />\r\n      </motion.div>\r\n\r\n      <AnimatePresence>\r\n        {isExpanded && (\r\n          <motion.div\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            exit=\"hidden\"\r\n            variants={contentVariants}\r\n            className=\"w-full mt-4\"\r\n          >\r\n            <h3 className=\"text-2xl font-bold text-blue-700 mb-4 text-center\">Your Profile</h3>\r\n            {showProfilePrompt ? (\r\n              <form onSubmit={handleProfileSubmit} className=\"flex flex-col gap-4 w-full\">\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Weight (kg)\"\r\n                  value={profile.weight}\r\n                  onChange={(e) => setProfile({ ...profile, weight: e.target.value })}\r\n                  className=\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"\r\n                />\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Target Calories\"\r\n                  value={profile.targetCalories}\r\n                  onChange={(e) => setProfile({ ...profile, targetCalories: e.target.value })}\r\n                  className=\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Profile Picture URL (e.g., https://example.com/image.jpg)\"\r\n                  value={profile.profilePic}\r\n                  onChange={(e) => setProfile({ ...profile, profilePic: e.target.value })}\r\n                  className=\"p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none bg-blue-50\"\r\n                />\r\n                <motion.button\r\n                  whileHover={{ scale: 1.05, boxShadow: '0px 4px 15px rgba(0, 0, 0, 0.2)' }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  type=\"submit\"\r\n                  className=\"bg-blue-600 text-white p-3 rounded-lg shadow-lg\"\r\n                >\r\n                  Save Profile\r\n                </motion.button>\r\n              </form>\r\n            ) : (\r\n              <div className=\"text-gray-700 text-center\">\r\n                <p><span className=\"font-semibold\">Weight:</span> {profile.weight} kg</p>\r\n                <p><span className=\"font-semibold\">Target Calories:</span> {profile.targetCalories}</p>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport default ProfileSidebar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}