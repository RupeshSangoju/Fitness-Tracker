{"ast":null,"code":"import{useEffect,useRef}from'react';import{motion}from'framer-motion';import{Line}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,Filler// Add Filler plugin\n}from'chart.js';// Register all components, including Filler\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,Filler);function Progress(_ref){let{progress,workouts}=_ref;const chartRef=useRef(null);// Ref to hold the canvas element\nconst chartInstanceRef=useRef(null);// Ref to hold the Chart.js instance\nuseEffect(()=>{// Cleanup function to destroy chart instance on unmount or update\nreturn()=>{if(chartInstanceRef.current){chartInstanceRef.current.destroy();chartInstanceRef.current=null;}};},[workouts]);if(!progress||!workouts.length)return null;const chartData={labels:workouts.map(w=>new Date(w.date).toLocaleDateString()),// Workout dates as labels\ndatasets:[{label:'Calories Burned',data:workouts.map(w=>w.calories),// Calorie data\nborderColor:'#10b981',backgroundColor:'rgba(16, 185, 129, 0.2)',fill:true// Keep fill option\n}]};const options={responsive:true,plugins:{legend:{position:'top'}},scales:{x:{type:'category',title:{display:true,text:'Date'}},y:{title:{display:true,text:'Calories'}}}};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.2},className:\"bg-white p-6 rounded-xl shadow-lg mb-6 border-l-4 border-yellow-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4 text-yellow-700\",children:\"Progress\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Total Workouts: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:progress.totalWorkouts})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Total Calories: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:progress.totalCalories})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"Avg Calories/Workout: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:progress.avgCalories})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:'relative',height:'300px',width:'100%'},children:/*#__PURE__*/_jsx(Line,{ref:chartRef,data:chartData,options:options// Removed getDatasetAtEvent prop\n})})]});}export default Progress;","map":{"version":3,"names":["useEffect","useRef","motion","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","jsx","_jsx","jsxs","_jsxs","register","Progress","_ref","progress","workouts","chartRef","chartInstanceRef","current","destroy","length","chartData","labels","map","w","Date","date","toLocaleDateString","datasets","label","data","calories","borderColor","backgroundColor","fill","options","responsive","plugins","legend","position","scales","x","type","title","display","text","y","div","initial","opacity","animate","transition","duration","delay","className","children","totalWorkouts","totalCalories","avgCalories","style","height","width","ref"],"sources":["C:/Users/rupes/Portifolio/Fitness Tracker/client/src/components/Progress.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler, // Add Filler plugin\r\n} from 'chart.js';\r\n\r\n// Register all components, including Filler\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nfunction Progress({ progress, workouts }) {\r\n  const chartRef = useRef(null); // Ref to hold the canvas element\r\n  const chartInstanceRef = useRef(null); // Ref to hold the Chart.js instance\r\n\r\n  useEffect(() => {\r\n    // Cleanup function to destroy chart instance on unmount or update\r\n    return () => {\r\n      if (chartInstanceRef.current) {\r\n        chartInstanceRef.current.destroy();\r\n        chartInstanceRef.current = null;\r\n      }\r\n    };\r\n  }, [workouts]);\r\n\r\n  if (!progress || !workouts.length) return null;\r\n\r\n  const chartData = {\r\n    labels: workouts.map(w => new Date(w.date).toLocaleDateString()), // Workout dates as labels\r\n    datasets: [{\r\n      label: 'Calories Burned',\r\n      data: workouts.map(w => w.calories), // Calorie data\r\n      borderColor: '#10b981',\r\n      backgroundColor: 'rgba(16, 185, 129, 0.2)',\r\n      fill: true, // Keep fill option\r\n    }],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: { position: 'top' },\r\n    },\r\n    scales: {\r\n      x: {\r\n        type: 'category',\r\n        title: { display: true, text: 'Date' },\r\n      },\r\n      y: {\r\n        title: { display: true, text: 'Calories' },\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      initial={{ opacity: 0, y: 20 }} \r\n      animate={{ opacity: 1, y: 0 }} \r\n      transition={{ duration: 0.5, delay: 0.2 }} \r\n      className=\"bg-white p-6 rounded-xl shadow-lg mb-6 border-l-4 border-yellow-500\"\r\n    >\r\n      <h3 className=\"text-2xl font-bold mb-4 text-yellow-700\">Progress</h3>\r\n      <p className=\"text-gray-700\">Total Workouts: <span className=\"font-semibold\">{progress.totalWorkouts}</span></p>\r\n      <p className=\"text-gray-700\">Total Calories: <span className=\"font-semibold\">{progress.totalCalories}</span></p>\r\n      <p className=\"text-gray-700\">Avg Calories/Workout: <span className=\"font-semibold\">{progress.avgCalories}</span></p>\r\n      <div style={{ position: 'relative', height: '300px', width: '100%' }}>\r\n        <Line\r\n          ref={chartRef}\r\n          data={chartData}\r\n          options={options}\r\n          // Removed getDatasetAtEvent prop\r\n        />\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport default Progress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}